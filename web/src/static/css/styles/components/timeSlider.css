@import "tailwindcss";

@layer components {
	/* Container */
	.time-slider-container {
		@apply w-full relative select-none font-sans;
	}

	/* Root */
	.time-slider {
		@apply relative w-full h-20 mt-2 mb-6;
	}
	.time-slider::before {
		/* base track */
		content: "";
		@apply absolute left-0 top-1/2 -translate-y-1/2 w-full h-2 rounded-full bg-gradient-to-r from-gray-200 via-gray-200 to-gray-200 shadow-inner;
	}

	/* Selected range */
	.time-slider-range {
		@apply absolute top-1/2 -translate-y-1/2 h-2 rounded-full bg-gradient-to-r from-blue-500 to-blue-400 shadow transition-[left,width] duration-150 ease-linear;
	}

	/* Handles */
	.time-slider-handle {
		@apply absolute top-1/2 -translate-y-1/2 w-5 h-5 bg-white border-2 border-blue-500 rounded-full shadow-lg cursor-grab flex items-center justify-center text-[10px] font-medium text-blue-600 transition duration-150 ease-out;
	}
	.time-slider-handle:hover {
		@apply bg-blue-50;
	}
	.time-slider-handle:focus-visible {
		@apply outline-none ring-4 ring-blue-300/40;
	}
	.time-slider-handle:active {
		@apply cursor-grabbing;
		transform: translateY(-50%) scale(1.08);
	}

	/* Floating combined label */
	.time-slider-label {
		@apply absolute -translate-x-1/2 -translate-y-full top-0 px-3 py-1 rounded-md text-xs font-medium tracking-wide bg-blue-600 text-white shadow whitespace-nowrap pointer-events-none select-none;
		transform-origin: center bottom;
		animation: tsl-label-pop 0.18s ease;
	}

	/* Tick marks wrapper */
	.time-slider-ticks {
		@apply absolute left-0 top-[58%] w-full text-[10px];
	}

	/* Individual ticks */
	.time-slider-ticks span {
		@apply absolute -translate-x-1/2 text-[10px] text-gray-500 font-medium leading-none;
		white-space: nowrap;
	}
	.time-slider-ticks span::before {
		content: "";
		@apply block w-px h-3 bg-gray-300 mx-auto mb-1;
	}

	/* Only hide alternating hour ticks in hours mode */
	.mode-hours
		.time-slider-ticks
		span:nth-child(odd):not(:first-child):not(:last-child) {
		@apply text-[0px];
	}
	.mode-hours
		.time-slider-ticks
		span:nth-child(odd):not(:first-child):not(:last-child)::before {
		@apply h-2 bg-gray-200;
	}

	/* Emphasize endpoints */
	.time-slider-ticks span:first-child::before,
	.time-slider-ticks span:last-child::before {
		@apply h-4 bg-gray-400;
	}

	/* Slightly larger labels in days mode */
	.mode-days .time-slider-ticks span {
		@apply text-[11px];
	}

	/* Dark mode support (optional if dark classes used) */
	.dark .time-slider::before {
		@apply from-gray-700 via-gray-700 to-gray-700;
	}
	.dark .time-slider-range {
		@apply from-blue-400 to-blue-300;
	}
	.dark .time-slider-handle {
		@apply bg-gray-100 border-blue-400 text-blue-600;
	}
	.dark .time-slider-handle:hover {
		@apply bg-white;
	}
	.dark .time-slider-label {
		@apply bg-blue-500;
	}
	.dark .time-slider-ticks span {
		@apply text-gray-300;
	}
	.dark .time-slider-ticks span::before {
		@apply bg-gray-500;
	}

	/* Mode selector buttons */
	.time-slider-mode {
		@apply flex gap-2 mb-1;
	}
	.time-slider-mode button {
		@apply px-3 py-1 text-xs font-medium rounded border border-gray-300 bg-white text-gray-700 hover:bg-gray-50 transition;
	}
	.time-slider-mode button.active {
		@apply bg-blue-600 border-blue-600 text-white shadow;
	}
	.dark .time-slider-mode button {
		@apply border-gray-600 bg-gray-700 text-gray-200 hover:bg-gray-600;
	}
	.dark .time-slider-mode button.active {
		@apply bg-blue-500 border-blue-500 text-white;
	}

	/* Animation */
	@keyframes tsl-label-pop {
		0% {
			transform: translate(-50%, -60%) scale(0.85);
			opacity: 0;
		}
		100% {
			transform: translate(-50%, -100%) scale(1);
			opacity: 1;
		}
	}
}
